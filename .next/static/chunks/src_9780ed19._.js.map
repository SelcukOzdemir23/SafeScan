{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/qr-scanner.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { QrReader } from 'react-qr-reader'; // Use the specific component\nimport { Loader2, RefreshCw } from 'lucide-react';\n\ninterface QrScannerProps {\n  onUrlDetected: (url: string | null) => void;\n  onError: (message: string) => void;\n  isActive: boolean; // To control camera activity based on tab selection\n}\n\nconst QrScanner: React.FC<QrScannerProps> = ({ onUrlDetected, onError, isActive }) => {\n  const [cameraError, setCameraError] = useState<string | null>(null);\n  const [isClient, setIsClient] = useState(false);\n\n  // The QrReader component needs to run client-side only\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  const handleResult = (result: any, error: any) => {\n     // Early exit if the scanner is not active\n     if (!isActive) return;\n\n    if (result) {\n       // Ensure result has text property and it's not empty\n      const scannedText = result?.getText();\n       if (scannedText) {\n         console.log(\"QR Scan Result:\", scannedText);\n         onUrlDetected(scannedText);\n       } else {\n          // Optional: Handle cases where QR is detected but has no text (rare)\n          // console.log(\"QR code detected but no text found.\");\n       }\n    }\n\n    if (error) {\n        // Ignore common \"NotFoundException\" errors which occur when no QR code is in view\n        // This prevents spamming the error state.\n        if (error.name === 'NotFoundException') {\n             // console.log('No QR code found in frame.');\n             setCameraError(null); // Clear previous actual errors\n             return;\n        }\n\n        console.error(\"QR Scanner Error:\", error);\n        let errorMessage = \"An unknown camera error occurred.\";\n        if (error.name === 'NotAllowedError') {\n            errorMessage = \"Camera permission denied. Please allow camera access in your browser settings.\";\n        } else if (error.name === 'NotReadableError') {\n            errorMessage = \"Could not access the camera. Is it already in use by another application?\";\n        } else if (error.name === 'OverconstrainedError') {\n            errorMessage = \"Could not find a suitable camera. Please ensure a camera is connected and enabled.\";\n        } else {\n            errorMessage = `Camera error: ${error.message || error.name}`;\n        }\n        setCameraError(errorMessage);\n        onError(errorMessage); // Propagate error up\n    }\n  };\n\n  const handleRetry = () => {\n    setCameraError(null);\n    onError(\"\"); // Clear error in parent as well\n    // The component should ideally retry automatically or provide a way to re-init\n    // For now, clearing the error might be enough if the underlying issue is resolved\n  };\n\n  // Render placeholder or nothing server-side\n  if (!isClient) {\n    return (\n         <div className=\"flex items-center justify-center h-64 bg-gray-100 dark:bg-gray-700 rounded-md\">\n             <Loader2 className=\"h-8 w-8 animate-spin text-gray-500\" />\n        </div>\n    );\n  }\n\n  // If not active, show a placeholder instead of activating the camera\n  if (!isActive) {\n     return (\n        <div className=\"flex items-center justify-center h-64 bg-gray-100 dark:bg-gray-700 rounded-md\">\n            <p className=\"text-gray-500 dark:text-gray-400\">Camera inactive</p>\n        </div>\n     );\n  }\n\n  // Render Camera Error state\n   if (cameraError) {\n    return (\n        <div className=\"flex flex-col items-center justify-center h-64 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 p-4 rounded-md text-center\">\n            <p className=\"mb-4\">{cameraError}</p>\n            <button\n                onClick={handleRetry}\n                className=\"flex items-center px-3 py-1 border border-red-300 dark:border-red-600 rounded text-sm hover:bg-red-100 dark:hover:bg-red-800/50 transition-colors\"\n            >\n                <RefreshCw className=\"w-4 h-4 mr-1\" />\n                Retry\n            </button>\n        </div>\n    );\n  }\n\n  // Render the QR Reader component\n  return (\n    <div className=\"relative w-full pt-[75%] bg-black rounded-md overflow-hidden shadow-inner\"> {/* Maintain aspect ratio, e.g., 4:3 */} \n      <QrReader\n        // `key` helps in re-initializing if needed, though often not necessary\n        onResult={handleResult}\n        constraints={{\n            facingMode: 'environment' // Prefer back camera\n        }}\n        // Removed `delay` and `style` as they might cause issues with newer versions or types\n        // The component should handle its own styling and layout within the container\n        containerStyle={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}\n        videoContainerStyle={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}\n        videoStyle={{ objectFit: 'cover', width: '100%', height: '100%' }}\n      />\n       {/* Optional: Add an overlay element here if desired */}\n       {/* <div className=\"absolute inset-0 border-4 border-green-500 opacity-50\" style={{ clipPath: 'inset(25% 25% 25% 25% round 10px)' }}></div> */}\n    </div>\n  );\n};\n\nexport default QrScanner;\n"],"names":[],"mappings":";;;;AAEA;AACA,sRAA4C,6BAA6B;AACzE;AAAA;;;AAJA;;;;AAYA,MAAM,YAAsC,CAAC,EAAE,aAAa,EAAE,OAAO,EAAE,QAAQ,EAAE;;IAC/E,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAC9D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,uDAAuD;IACvD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,YAAY;QACd;8BAAG,EAAE;IAEL,MAAM,eAAe,CAAC,QAAa;QAChC,0CAA0C;QAC1C,IAAI,CAAC,UAAU;QAEhB,IAAI,QAAQ;YACT,qDAAqD;YACtD,MAAM,cAAc,QAAQ;YAC3B,IAAI,aAAa;gBACf,QAAQ,GAAG,CAAC,mBAAmB;gBAC/B,cAAc;YAChB,OAAO;YACJ,qEAAqE;YACrE,sDAAsD;YACzD;QACH;QAEA,IAAI,OAAO;YACP,kFAAkF;YAClF,0CAA0C;YAC1C,IAAI,MAAM,IAAI,KAAK,qBAAqB;gBACnC,6CAA6C;gBAC7C,eAAe,OAAO,+BAA+B;gBACrD;YACL;YAEA,QAAQ,KAAK,CAAC,qBAAqB;YACnC,IAAI,eAAe;YACnB,IAAI,MAAM,IAAI,KAAK,mBAAmB;gBAClC,eAAe;YACnB,OAAO,IAAI,MAAM,IAAI,KAAK,oBAAoB;gBAC1C,eAAe;YACnB,OAAO,IAAI,MAAM,IAAI,KAAK,wBAAwB;gBAC9C,eAAe;YACnB,OAAO;gBACH,eAAe,CAAC,cAAc,EAAE,MAAM,OAAO,IAAI,MAAM,IAAI,EAAE;YACjE;YACA,eAAe;YACf,QAAQ,eAAe,qBAAqB;QAChD;IACF;IAEA,MAAM,cAAc;QAClB,eAAe;QACf,QAAQ,KAAK,gCAAgC;IAC7C,+EAA+E;IAC/E,kFAAkF;IACpF;IAEA,4CAA4C;IAC5C,IAAI,CAAC,UAAU;QACb,qBACK,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC,oNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;;;;;;IAG9B;IAEA,qEAAqE;IACrE,IAAI,CAAC,UAAU;QACZ,qBACG,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAE,WAAU;0BAAmC;;;;;;;;;;;IAG1D;IAEA,4BAA4B;IAC3B,IAAI,aAAa;QAChB,qBACI,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAE,WAAU;8BAAQ;;;;;;8BACrB,6LAAC;oBACG,SAAS;oBACT,WAAU;;sCAEV,6LAAC,mNAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;IAKpD;IAEA,iCAAiC;IACjC,qBACE,6LAAC;QAAI,WAAU;;YAA4E;0BACzF,6LAAC,gKAAA,CAAA,WAAQ;gBACP,uEAAuE;gBACvE,UAAU;gBACV,aAAa;oBACT,YAAY,cAAc,qBAAqB;gBACnD;gBACA,sFAAsF;gBACtF,8EAA8E;gBAC9E,gBAAgB;oBAAE,UAAU;oBAAY,KAAK;oBAAG,MAAM;oBAAG,OAAO;oBAAQ,QAAQ;gBAAO;gBACvF,qBAAqB;oBAAE,UAAU;oBAAY,KAAK;oBAAG,MAAM;oBAAG,OAAO;oBAAQ,QAAQ;gBAAO;gBAC5F,YAAY;oBAAE,WAAW;oBAAS,OAAO;oBAAQ,QAAQ;gBAAO;;;;;;;;;;;;AAMxE;GA9GM;KAAA;uCAgHS","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/qr-uploader.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport jsQR from 'jsqr';\nimport { UploadCloud, Loader2, AlertCircle } from 'lucide-react';\nimport { Button } from \"@/components/ui/button\";\n\ninterface QrUploaderProps {\n  onUrlDetected: (url: string | null) => void;\n  onError: (message: string) => void;\n}\n\nconst QrUploader: React.FC<QrUploaderProps> = ({ onUrlDetected, onError }) => {\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n  const [feedbackMessage, setFeedbackMessage] = useState<string | null>(null);\n  const [isError, setIsError] = useState<boolean>(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const handleFileChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) {\n      return;\n    }\n\n    setIsProcessing(true);\n    setFeedbackMessage('Processing image...');\n    setIsError(false);\n    onError(\"\"); // Clear previous errors in parent\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      const dataUrl = e.target?.result as string;\n      if (!dataUrl) {\n        setFeedbackMessage('Could not read file data.');\n        setIsError(true);\n        onError('Could not read file data.');\n        setIsProcessing(false);\n        return;\n      }\n\n      const image = new Image();\n      image.onload = () => {\n        const canvas = canvasRef.current;\n        const ctx = canvas?.getContext('2d', { willReadFrequently: true }); // Optimize for frequent reads\n\n        if (!canvas || !ctx) {\n          setFeedbackMessage('Canvas element not available.');\n          setIsError(true);\n           onError('Canvas element not available.');\n          setIsProcessing(false);\n          return;\n        }\n\n        // Adjust canvas size to image dimensions\n        canvas.width = image.naturalWidth;\n        canvas.height = image.naturalHeight;\n\n        // Draw image onto canvas\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n        try {\n          // Get image data from canvas\n          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n          // Decode QR code using jsQR\n          const code = jsQR(imageData.data, imageData.width, imageData.height, {\n            inversionAttempts: 'dontInvert', // Or 'attemptBoth' if needed\n          });\n\n          if (code && code.data) {\n            console.log(\"Decoded QR from Upload:\", code.data);\n            setFeedbackMessage('QR Code detected!');\n            setIsError(false);\n            onUrlDetected(code.data);\n          } else {\n            setFeedbackMessage('No QR code found in the uploaded image.');\n             setIsError(true);\n             onError('No QR code found in the uploaded image.') // Inform parent\n             onUrlDetected(null); // Ensure parent knows no URL was found\n          }\n        } catch (err) {\n           console.error(\"Error decoding QR code:\", err);\n           setFeedbackMessage('Error processing image for QR code.');\n           setIsError(true);\n           onError('Error processing image for QR code.')\n           onUrlDetected(null);\n        }\n         finally {\n           // Clear canvas after processing\n           // ctx.clearRect(0, 0, canvas.width, canvas.height);\n           setIsProcessing(false);\n           // Reset file input to allow uploading the same file again if needed\n           if (fileInputRef.current) {\n                fileInputRef.current.value = \"\";\n           }\n         }\n      };\n\n      image.onerror = () => {\n        setFeedbackMessage('Could not load image file. Is it a valid image?');\n        setIsError(true);\n        onError('Could not load image file.');\n        setIsProcessing(false);\n      };\n\n      image.src = dataUrl;\n    };\n\n    reader.onerror = () => {\n       setFeedbackMessage('Error reading file.');\n       setIsError(true);\n       onError('Error reading file.');\n       setIsProcessing(false);\n    };\n\n    reader.readAsDataURL(file);\n  }, [onUrlDetected, onError]);\n\n  const triggerFileInput = () => {\n    fileInputRef.current?.click();\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-md h-64\">\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileChange}\n        accept=\"image/*\" // Accept common image types\n        className=\"hidden\" // Hide the default input\n        disabled={isProcessing}\n      />\n      {/* Hidden canvas used for image processing */}\n      <canvas ref={canvasRef} style={{ display: 'none' }}></canvas>\n\n      {isProcessing ? (\n        <div className=\"flex flex-col items-center text-center\">\n           <Loader2 className=\"h-8 w-8 animate-spin text-blue-500 mb-2\" />\n           <p className=\"text-sm text-gray-600 dark:text-gray-400\">{feedbackMessage || 'Processing...'}</p>\n        </div>\n      ) : (\n        <div className=\"flex flex-col items-center text-center\">\n          <UploadCloud className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mb-3\" />\n          <Button onClick={triggerFileInput} variant=\"outline\" size=\"sm\">\n            Choose Image File\n          </Button>\n          <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">Select an image containing a QR code.</p>\n            {feedbackMessage && (\n                <p className={`mt-3 text-sm ${isError ? 'text-red-600 dark:text-red-400' : 'text-green-600 dark:text-green-400'}`}>\n                 {isError && <AlertCircle className=\"inline w-4 h-4 mr-1\"/>}\n                 {feedbackMessage}\n                </p>\n            )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default QrUploader;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/safety-result.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport {\n  CheckCircle2,\n  XCircle,\n  AlertTriangle,\n  AlertCircle,\n  HelpCircle,\n  ExternalLink,\n  ShieldQuestion\n} from 'lucide-react';\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from '@/lib/utils'; // Assuming you have this utility\n\n// Define the expected structure for the result prop\ninterface SafetyResultData {\n  originalUrl: string;\n  status: 'SAFE' | 'UNSAFE' | 'ERROR' | 'INVALID_URL' | 'CONFIG_ERROR' | 'UNKNOWN';\n  message: string;\n}\n\ninterface SafetyResultProps {\n  result: SafetyResultData;\n}\n\nconst SafetyResult: React.FC<SafetyResultProps> = ({ result }) => {\n  let IconComponent: React.ElementType;\n  let iconColorClass: string;\n  let badgeVariant: \"default\" | \"destructive\" | \"secondary\" | \"outline\" = \"secondary\";\n  let statusText: string = result.status;\n\n  switch (result.status) {\n    case 'SAFE':\n      IconComponent = CheckCircle2;\n      iconColorClass = 'text-green-600 dark:text-green-500';\n      badgeVariant = 'default'; // Use default (often green or primary) for safe\n      statusText = 'Safe';\n      break;\n    case 'UNSAFE':\n      IconComponent = XCircle;\n      iconColorClass = 'text-red-600 dark:text-red-500';\n      badgeVariant = 'destructive';\n      statusText = 'Unsafe';\n      break;\n    case 'INVALID_URL':\n      IconComponent = AlertTriangle;\n      iconColorClass = 'text-orange-500 dark:text-orange-400';\n      badgeVariant = 'outline';\n      statusText = 'Invalid Input';\n      break;\n    case 'ERROR':\n    case 'CONFIG_ERROR': // Treat config errors similarly to general errors visually\n      IconComponent = AlertCircle;\n      iconColorClass = 'text-yellow-600 dark:text-yellow-500';\n      badgeVariant = 'secondary';\n      statusText = 'Error';\n      break;\n    case 'UNKNOWN':\n    default:\n      IconComponent = ShieldQuestion; // More specific than HelpCircle\n      iconColorClass = 'text-gray-500 dark:text-gray-400';\n      badgeVariant = 'secondary';\n      statusText = 'Unknown';\n      break;\n  }\n\n  // Function to safely create a link\n  const renderLink = (url: string) => {\n    try {\n      // Attempt to parse URL again for safety, although validated before\n      const parsedUrl = new URL(url);\n      // Only render links for safe URLs for extra caution?\n      // if (result.status === 'SAFE') {\n      //   return (\n      //     <a\n      //       href={parsedUrl.toString()} // Use parsed toString for consistency\n      //       target=\"_blank\"\n      //       rel=\"noopener noreferrer\"\n      //       className=\"text-blue-600 dark:text-blue-400 hover:underline break-all inline-flex items-center\"\n      //     >\n      //       {parsedUrl.toString()}\n      //       <ExternalLink className=\"w-3 h-3 ml-1\" />\n      //     </a>\n      //   );\n      // }\n      // For now, just display the text for all statuses\n      return <span className=\"text-gray-700 dark:text-gray-300 break-all\">{parsedUrl.toString()}</span>;\n    } catch (_)\n    {\n        // If URL is somehow invalid at this stage, just display raw text\n         return <span className=\"text-gray-500 dark:text-gray-400 break-all\">{url} (Malformed)</span>;\n    }\n  };\n\n\n  return (\n    <div className=\"flex flex-col items-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 shadow-sm w-full\">\n      <IconComponent className={cn(\"w-16 h-16 mb-4\", iconColorClass)} />\n\n      <Badge variant={badgeVariant} className=\"mb-2 px-3 py-1 text-sm font-semibold\">\n        {statusText}\n      </Badge>\n\n      <p className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-1\">Scan Result</p>\n\n      <div className=\"text-center max-w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 rounded mb-4 overflow-x-auto\">\n         <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Detected URL:</p>\n        {renderLink(result.originalUrl)}\n      </div>\n\n\n      <p className=\"text-center text-sm text-gray-600 dark:text-gray-300\">\n        {result.message}\n      </p>\n    </div>\n  );\n};\n\nexport default SafetyResult;\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAAA;AASA;AACA,8MAAkC,iCAAiC;AAbnE;;;;;AA0BA,MAAM,eAA4C,CAAC,EAAE,MAAM,EAAE;IAC3D,IAAI;IACJ,IAAI;IACJ,IAAI,eAAoE;IACxE,IAAI,aAAqB,OAAO,MAAM;IAEtC,OAAQ,OAAO,MAAM;QACnB,KAAK;YACH,gBAAgB,wNAAA,CAAA,eAAY;YAC5B,iBAAiB;YACjB,eAAe,WAAW,gDAAgD;YAC1E,aAAa;YACb;QACF,KAAK;YACH,gBAAgB,+MAAA,CAAA,UAAO;YACvB,iBAAiB;YACjB,eAAe;YACf,aAAa;YACb;QACF,KAAK;YACH,gBAAgB,2NAAA,CAAA,gBAAa;YAC7B,iBAAiB;YACjB,eAAe;YACf,aAAa;YACb;QACF,KAAK;QACL,KAAK;YACH,gBAAgB,uNAAA,CAAA,cAAW;YAC3B,iBAAiB;YACjB,eAAe;YACf,aAAa;YACb;QACF,KAAK;QACL;YACE,gBAAgB,6NAAA,CAAA,iBAAc,EAAE,gCAAgC;YAChE,iBAAiB;YACjB,eAAe;YACf,aAAa;YACb;IACJ;IAEA,mCAAmC;IACnC,MAAM,aAAa,CAAC;QAClB,IAAI;YACF,mEAAmE;YACnE,MAAM,YAAY,IAAI,IAAI;YAC1B,qDAAqD;YACrD,kCAAkC;YAClC,aAAa;YACb,SAAS;YACT,2EAA2E;YAC3E,wBAAwB;YACxB,kCAAkC;YAClC,wGAAwG;YACxG,QAAQ;YACR,+BAA+B;YAC/B,kDAAkD;YAClD,WAAW;YACX,OAAO;YACP,IAAI;YACJ,kDAAkD;YAClD,qBAAO,6LAAC;gBAAK,WAAU;0BAA8C,UAAU,QAAQ;;;;;;QACzF,EAAE,OAAO,GACT;YACI,iEAAiE;YAChE,qBAAO,6LAAC;gBAAK,WAAU;;oBAA8C;oBAAI;;;;;;;QAC9E;IACF;IAGA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAc,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,kBAAkB;;;;;;0BAE/C,6LAAC,oIAAA,CAAA,QAAK;gBAAC,SAAS;gBAAc,WAAU;0BACrC;;;;;;0BAGH,6LAAC;gBAAE,WAAU;0BAA4D;;;;;;0BAEzE,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAE,WAAU;kCAAgD;;;;;;oBAC7D,WAAW,OAAO,WAAW;;;;;;;0BAIhC,6LAAC;gBAAE,WAAU;0BACV,OAAO,OAAO;;;;;;;;;;;;AAIvB;KA3FM;uCA6FS","debugId":null}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,mKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,mKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 910, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 987, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useCallback } from 'react';\nimport QrScanner from '../components/qr-scanner'; // Relative import\nimport QrUploader from '../components/qr-uploader'; // Relative import\nimport SafetyResult from '../components/safety-result'; // Relative import\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Button } from '@/components/ui/button';\nimport { Loader2 } from 'lucide-react';\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\n\n// Define the structure for the safety result data\ninterface SafetyResultData {\n  originalUrl: string;\n  status: 'SAFE' | 'UNSAFE' | 'ERROR' | 'INVALID_URL' | 'CONFIG_ERROR' | 'UNKNOWN'; // Added UNKNOWN\n  message: string;\n}\n\nexport default function HomePage() {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [resultData, setResultData] = useState<SafetyResultData | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [currentTab, setCurrentTab] = useState<string>(\"scan\"); // To control scanner activity\n\n  // Function to handle URL detected from scanner or uploader\n  const handleUrlDetected = useCallback(async (url: string | null) => {\n    if (!url) {\n      setError(\"QR code does not contain readable data or is not a valid image.\"); // Modified error\n      setResultData(null);\n      setIsLoading(false);\n      return;\n    }\n\n    console.log(`URL Detected: ${url}`);\n    setIsLoading(true);\n    setError(null);\n    setResultData(null); // Clear previous result\n\n    // Client-side URL validation (basic)\n    try {\n       new URL(url);\n       // More robust checks can be added here if needed\n       if (!url.startsWith('http://') && !url.startsWith('https://')) {\n          throw new Error(\"URL must start with http:// or https://\");\n       }\n    } catch (_)\n    {\n       console.log(\"Invalid URL format detected client-side\");\n        // Use a result state to show this info, similar to how the API does\n        setResultData({\n           originalUrl: url,\n           status: 'INVALID_URL',\n           message: 'The scanned data is not a valid web URL (must start with http:// or https://).'\n        });\n       setIsLoading(false);\n       return;\n    }\n\n\n    // Call the Next.js API Route\n    try {\n      const response = await fetch('/api/check-url', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ url }),\n      });\n\n      const data: SafetyResultData | { error: string } = await response.json();\n\n      if (!response.ok) {\n        const errorMsg = (data as { error: string }).error || `Request failed with status ${response.status}`;\n        throw new Error(errorMsg);\n      }\n\n      // Type guard to ensure data is SafetyResultData\n      if ('status' in data) {\n         setResultData(data);\n      } else {\n         // This case should ideally be covered by !response.ok, but good practice\n         throw new Error(\"Received unexpected response format from server.\");\n      }\n\n    } catch (err: any) {\n      console.error(\"Error checking URL safety:\", err);\n      setError(err.message || \"An unexpected error occurred.\");\n      setResultData(null); // Clear result on error\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Function to reset the state and allow a new scan/upload\n  const handleReset = () => {\n    setIsLoading(false);\n    setError(null);\n    setResultData(null);\n    // Consider resetting the uploader's file input if needed\n  };\n\n  // Handler for errors from child components, with explicit type\n  const handleError = useCallback((errMsg: string) => {\n      setError(errMsg);\n  }, []);\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center justify-center p-4 md:p-12 bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800\">\n      <Card className=\"w-full max-w-lg shadow-xl dark:bg-gray-850\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-2xl font-bold tracking-tight\">QR Code Link Safety Checker</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {/* Display Error if any */}\n          {error && (\n            <Alert variant=\"destructive\" className=\"mb-4\">\n              <AlertTitle>Error</AlertTitle>\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          {/* Display Loading Indicator */}\n          {isLoading && (\n            <div className=\"flex flex-col items-center justify-center p-8\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-blue-600\" />\n              <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300\">Checking URL safety...</p>\n            </div>\n          )}\n\n          {/* Display Result if available */}\n          {!isLoading && resultData && (\n            <div className=\"flex flex-col items-center\">\n                <SafetyResult result={resultData} />\n                <Button onClick={handleReset} variant=\"outline\" className=\"mt-6\">Scan/Upload Another</Button>\n            </div>\n          )}\n\n          {/* Display Scanner/Uploader Tabs if not loading and no result */}\n          {!isLoading && !resultData && (\n             <Tabs value={currentTab} onValueChange={setCurrentTab} defaultValue=\"scan\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"scan\">Scan with Camera</TabsTrigger>\n                    <TabsTrigger value=\"upload\">Upload Image</TabsTrigger>\n                </TabsList>\n                <TabsContent value=\"scan\">\n                    <QrScanner\n                        onUrlDetected={handleUrlDetected}\n                        onError={handleError} // Use the typed handler\n                        isActive={currentTab === 'scan'} // Only active when tab is selected\n                    />\n                    <p className=\"mt-2 text-sm text-center text-gray-500 dark:text-gray-400\">Point your camera at a QR code.</p>\n                </TabsContent>\n                <TabsContent value=\"upload\">\n                    <QrUploader\n                        onUrlDetected={handleUrlDetected}\n                        onError={handleError} // Use the typed handler\n                    />\n                     <p className=\"mt-2 text-sm text-center text-gray-500 dark:text-gray-400\">Upload an image file containing a QR code.</p>\n                </TabsContent>\n            </Tabs>\n          )}\n\n        </CardContent>\n      </Card>\n       <p className=\"mt-8 text-xs text-gray-500 dark:text-gray-400 text-center max-w-lg\">\n           Disclaimer: This tool uses external services like Google Safe Browsing to check URL safety. Results are indicative and not guaranteed to be 100% accurate. Always exercise caution when clicking links.\n       </p>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}